#################################COMMON FUNCTIONS#######################

usableByAll item
 mapBound item setUsableBy {"aramis", "luc", "joy", "roland"}
 
usableByMagicPeople item
  mapBound item setUsableBy {"joy", "roland"}
  
usableBySwordPeople item
  mapBound item setUsableBy {"joy", "luc"}
  
  
  ###############################Super awesome triggers##################

fireSwitchedTrigger trigger enemy fn
  setSwitchCondition trigger false
  fn enemy

onHPFraction enemy numer denom fn 
  \triggerRun <- (createSwitchCondition true)
  createTrigger {triggerRun, getOnDamageReceivedEvent enemy} (
  [trigger] (|(enemy > getHP) > less (enemy > getStat "MaxHP" > multiply numer > divide denom)
  | equals true : fireSwitchedTrigger triggerRun enemy fn
  | equals false : ""
  ))
  
  
  ######################################################################

\knife <- (addItem "knife" "Knife" "Weapon" "dagger" "A small and simple dagger." >
setPower 5 >
setValue 30 >
setUsableBy "aramis" >
swing "dagger" "slice1" >
swingBase 0 186 186 186 >
swingBase 1 255 255 255 >
swingBase 2 138 68 0 >
swingSlash 0 128 128 128 >
swingSlash 1 186 186 186 >
swingSlash 2 255 255 255)

\woodensword <- (addItem "woodensword" "Wooden Sword" "Weapon" "sword" "A practice sword." >
setPower 6 >
setValue 45 >
usableBySwordPeople >
swing "sword" "slice1" >
swingBase 0 139 69 19 >
swingBase 1 222 184 134 >
swingSlash 0 92 64 51 >
swingSlash 1 139 69 19 >
swingSlash 2 222 184 134)  

\silversword <- (addItem "silversword" "Silver Sword" "Weapon" "sword" "Some believe the silver inlay wards off the undead." >
setPower 10 >
setValue 250 >
usableBySwordPeople >
swing "sword" "slice1" >
swingBase 0 186 186 186 >
swingBase 1 255 255 255 >
swingSlash 0 128 128 128 >
swingSlash 1 186 186 186 >
swingSlash 2 255 255 255)   


\frostrapier <- (addItem "frostrapier" "Frost Rapier" "Weapon" "sword" "A sword imbued with the power of ice." >
setPower 12 >
setValue 525 >
usableBySwordPeople >
swing "sword" "slice1" >
swingBase 0 105 212 213 >
swingBase 1 165 242 243 >
swingSlash 0 105 212 213 >
swingSlash 1 136 227 228 >
swingSlash 2 165 242 243)     

\silverstaff <- (addItem "silverstaff" "Silver Staff" "Weapon" "staff" "A magical staff." >
setPower 1 >
modStat "MagicPower" 4 >
setValue 250 >
usableByMagicPeople >
swing "staff" "slice1" >
swingBase 0 186 186 186 >
swingBase 1 255 255 255 >
swingBase 2 0 0 186 >
swingBase 3 0 0 255 >
swingSlash 0 128 128 128 >
swingSlash 1 186 186 186 >
swingSlash 2 255 255 255 >
swingSlash 3 0 0 128 >
swingSlash 4 0 0 186 >
swingSlash 5 0 0 255)


\fireknife <- (addItem "fireknife" "Flame Dagger" "Weapon" "dagger" "A dagger that does burning damage." >
setPower 9 >
setValue 250 >
setUsableBy "aramis" >
addDamageComp "Fire" 1.0 >
swing "dagger" "slice1" >
swingBase 0 186 0 0 >
swingBase 1 255 0 0 >
swingBase 2 138 68 0 >
swingSlash 0 128 0 0 >
swingSlash 1 186 0 0 >
swingSlash 2 255 0 0)


\felthat <- (addItem "felthat" "Felt Hat" "Helmet" "lhelmet" "Most basic of headwear." >
setPower 3 >
setValue 15 >
usableByAll)

\cottonshirt <- (addItem "cottonshirt" "Cotton Shirt" "Torso" "ltorso" "A simple shirt." >
setPower 4 >
setValue 25 >
usableByAll)

\woodenshield <- (addItem "woodenshield" "Wood Shield" "Shield" "lshield" "A crude shield." >
setPower 2 >
setValue 120 >
setUsableBy "luc")

\volcanicrock <- (addItem "volcanicrock" "Volcano Rock" "Accessory" "ring" "Still warm to the touch, boosts your fire affinity." >
setPower 0 >
modStat "Fire" 15 >
setValue 500 >
usableByAll)

\runningshoes <- (addItem "runningshoes" "RunningShoes" "Accessory" "boot" "Shoes that allow you to move faster." >
setPower 0 >
modStat "Speed" 3 >
setValue 800 >
usableByAll)

\safetyring <- (addItem "safetyring" "Safety Ring" "Accessory" "ring" "A ring that causes regen status when weakened." >
setPower 0 >
setValue 300 >
onEquippedBattleStart ([battle wearer] 
   onHPFraction wearer 1 4 ([healme]
   addNextAbility healme healme (getAbility "safetyheal")
))>
usableByAll)




addDefaultWait item
  add item (waitAction 450) >
  add (setFaceAction "Use" 0)
 
 addDefaultAnimation item
  addDep item (animAction "movetest")
  



\potion <- (addItem "potion" "Potion" "Usable" "orb" "Restores 50 HP." >
setValue 75 >
setTargetType "Single" >
addDefaultWait >
addDep (animBuildAction "heal") >
addDep (damageAction -50.0 "Fixed"))

\liferoot <- (addItem "liferoot" "Life Root" "UsableBattleOnly" "orb" "Revives a fallen party member." >
setValue 1200 >
setTargetType "SingleDeadAlly" >
addDefaultWait >
addDep (reviveAnimAction 0 ) >
addDep (reviveAction 0 ) >
addDep (damageAction -50.0 "Fixed"))

\megalixer <- (addItem "megalixer" "MegaLickser" "Usable" "orb" "Fully heals all allies." >
setShortName "MegaLiksr" >
setValue 1 >
setTargetType "AllAllies" >
addDefaultWait >
addDep (animBuildAction "icebarrage") >
addDep (damageAction -9999.0 "Fixed"))

\bomb <- (addItem "bomb" "Bomb" "UsableBattleOnly" "orb" "Devastating damage to all enemies." >
setValue 1 >
setTargetType "AllEnemies" >
addDefaultWait >
addDefaultAnimation >
addDep (damageAction 9999.0 "Fixed"))

 
\antidote <- (addItem "antidote" "Antidote" "Usable" "orb" "Cures Poison." >
setValue 75 >
setTargetType "Single" >
addDefaultWait >
addDep (animBuildAction "antidote") >
addDep (removeStatusAction "poison"))


\tranquilizer <- (addItem "tranquilizer" "Tranqlizr" "UsableBattleOnly" "orb" "Cures Berserk." >
setValue 75 >
setTargetType "Single" >
addDefaultWait >
addDep (animBuildAction "tranquilizer") >
addDep (removeStatusAction "berserk"))

\sleepingbag <- (addItem "sleepingbag" "Sleeping Bag" "UsableSavePointOnly" "orb" "Use at a save point to fully restore one party member." >
setShortDescription "Restore a party member." >
setValue 200 >
setTargetType "Single" >
addDefaultWait >
addDep (fullRestore 0))


\lurebell <- (addItem "lurebell" "Lure Bell" "UsableWorldOnly" "orb" "Lures enemies towards you with an irresistable sound.  Runs out after 50 steps." >
setShortDescription "Causes more random battles." >
setValue 250 >
setTargetType "Single" >
addDefaultWait >
addDep (lureAction 50))

\tent <- (addItem "tent" "Tent" "UsableSavePointOnly" "orb" "Use at a save point to fully restore all party members." >
setShortDescription "Restore all party members." >
setValue 500 >
setTargetType "AllAllies" >
addDefaultWait >
addDep (fullRestore 0))

\prisonkey <- (addItem "prisonkey" "Prison Key" "Key" "orb" "Key to the castle prison cells.")
\goldenbush <- (addItem "goldenbush" "Goldenbush" "Key" "orb" "A common mountain herb with healing properties.")
