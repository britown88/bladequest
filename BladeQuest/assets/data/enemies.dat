#Handy funcs
addColoredDaggerHit enemy color1 color2
   enemy > setAttackAnimation "dagger" > 
         setAttackColors (interpolateColorsToList color1 color2 3)
         
addDefaultDaggerHit enemy
   addColoredDaggerHit enemy (RGBA 255 255 255 255) (RGBA 128 128 128 255)

addColoredSwordHit enemy color1 color2
   enemy > setAttackAnimation "sword" > 
           setAttackColors (interpolateColorsToList color1 color2 3)
         
addDefaultSwordHit enemy
   addColoredSwordHit enemy (RGBA 255 255 255 255) (RGBA 128 128 128 255)
 
addColoredStaffHit enemy color1 color2   
   enemy > setAttackAnimation "staff" >
   	       setAttackColors (interpolateColorsToList color1 color2 6)
   	        
addDefaultStaffHit enemy
   addColoredStaffHit enemy (RGBA 255 255 255 255) (RGBA 128 128 128 255)
   
   
addAttackOnlyState enemy
	enemy > setEnemyAI (
		createAI "default" (createAIState ([e decision] ""))
		)
	
addBiteOnlyState enemy
	enemy > setEnemyAI (
		createAI "biteMe" (createAIState ([e decision] setAbility decision (e > getEnemyAbility "bite")))
		)	


RandomRecruitAction e decision
   setAbility decision (|randomRoll 100
    |greater 33  : (e > getEnemyAbility "specialmegakick")
    |greater 66  : (e > getEnemyAbility "dynamosupernova")
    |greater 100 : (e > getEnemyAbility "climacticfinisher")
   )

RecruitDerpState enemy
	enemy > setEnemyAI (
		createAI "RAAAAAAAAAAAAAAAH" (createAIState RandomRecruitAction)
		)	


retaliateState enemy decision
     switchEnemyState enemy "default"
     decision > setAbility (enemy > getEnemyAbility "bite")
     
switchToRetaliate enemy
	switchEnemyState enemy "retaliate"     
     #interruptCurrent 0 #ignored arg
    # addInterruptingAbility enemy (getCurrentBattleActor 0) (getEnemyAbility enemy "bite")
     
createSwitchToRetaliateTrigger enemy     
     createTrigger (getOnPhysicalHitEvent enemy) ([trigger] switchToRetaliate enemy)
     
makeRatAI enemy
   enemy > setEnemyAI (
           createAI "default" (createAIState ([e decision] "")) > 
           addAIState "retaliate" (createAIState retaliateState)) >
           onBattleStartRun createSwitchToRetaliateTrigger 
   


###########################ENEMIES###################################################

#
\rat <- (addEnemy "rat" "Rat" "rat" >
setEBaseStats 10 1 1 1 >
addColoredStaffHit (RGBA 255 0 0 255) (RGBA 0 0 0 255) >
setELevel 4 >
setGold 23 >
setItems "potion" 25 "antidote" 85 true >
modStat "MaxHP" 0 >
makeRatAI >
addEAbility "bite" >
setEShadow (createShadow 40 36 15))

#
\guard <- (addEnemy "guard" "Guard" "guard" >
addDefaultSwordHit >
setEBaseStats 10 10 10 10 >
setELevel 25 >
addAttackOnlyState >
setGold 1200 >
setEShadow (createShadow 38 24 32 > nudgeX -4))

#
\hawk <- (addEnemy "hawk" "Hawk" "hawk" >
addDefaultDaggerHit >
setEBaseStats 3 3 3 3 >
setELevel 20 >
addAttackOnlyState >
setGold 52 >
setEShadow (createShadow 44 14 40 > addElevation 16))

#
\spud <- (addEnemy "spud" "Spud" "spud" >
addDefaultDaggerHit >
setEBaseStats 3 3 3 3 >
setELevel 1 >
addAttackOnlyState >
setGold 52 >
setEShadow (createShadow 31 16 22))

#
\leafbunny <- (addEnemy "leafbunny" "Leafy Bunny" "leafbunny" >
addDefaultDaggerHit >
setEBaseStats 3 3 3 3 >
setELevel 20 >
addAttackOnlyState >
setGold 52 >
setEShadow (createShadow 42 12 25))

#
\satyr <- (addEnemy "satyr" "Satyr" "satyr" >
addDefaultDaggerHit >
setEBaseStats 3 3 3 3 >
setELevel 20 >
addAttackOnlyState >
setGold 52 >
setEShadow (createShadow 71 34 50 > nudgeX -11))

#
\bat <- (addEnemy "bat" "Bat" "bat" >
addDefaultDaggerHit >
setEBaseStats 7 10 8 0 >
setELevel 6 >
setGold 42  >
addAttackOnlyState >
setItems "potion" 50 " " 0 true >
setEShadow (createShadow 34 12 30 > addElevation 16))

#
\recruit <- (addEnemy "recruit" "Recruit" "recruit" >
addDefaultSwordHit >
setEBaseStats 10 0 0 0 >
setELevel 7 >
setGold 250 >
setBoss >
setItems "potion" 100 "silversword" 100 true >
RecruitDerpState >
addEAbility "specialmegakick" >
addEAbility "dynamosupernova" >
addEAbility "climacticfinisher"  >
setEShadow (createShadow 44 28 21))


